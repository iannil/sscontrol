# 开发路线图

## 项目概述

sscontrol 是一个基于 Rust 的无界面远程桌面应用，采用 WebRTC 实现 P2P 通信。

## 开发阶段

### Phase 0: 规划与设计 📋

**目标**: 完成技术架构设计和项目初始化

**状态**: 进行中

**任务清单**:
- [x] 架构设计文档
- [x] 技术栈选型
- [x] 开发路线规划
- [ ] 初始化 Rust 项目 (`cargo init`)
- [ ] 创建 Cargo.toml 配置
- [ ] 建立项目目录结构
- [ ] 搭建基础开发环境

---

### Phase 1: MVP - 单向屏幕捕获 🎥

**目标**: 实现基础的屏幕捕获和单向视频传输

**状态**: 待开始

**核心功能**:
1. **屏幕捕获模块** (`src/capture/mod.rs`)
   - [ ] Windows: Desktop Duplication API 集成
   - [ ] macOS: ScreenCaptureKit 集成
   - [ ] 跨平台抽象层设计

2. **视频编码模块** (`src/encoder/mod.rs`)
   - [ ] FFmpeg 集成
   - [ ] H.264 编码实现
   - [ ] 帧率控制 (30fps 目标)

3. **基础网络传输** (`src/network/mod.rs`)
   - [ ] WebSocket 信令客户端
   - [ ] 简单的视频流传输（暂不用 WebRTC）

4. **命令行界面**
   - [ ] 配置文件读取 (`config.toml`)
   - [ ] Device ID 生成/读取
   - [ ] 连接状态输出

**验收标准**:
- 可以捕获屏幕并以 30fps 传输
- 控制端可以接收到视频流

---

### Phase 2: 鼠标控制 🖱️

**目标**: 添加鼠标控制功能，实现双向交互

**状态**: 待开始

**核心功能**:
1. **输入模拟模块** (`src/input/mod.rs`)
   - [ ] 鼠标移动
   - [ ] 鼠标点击 (左键/右键/中键)
   - [ ] 鼠标滚轮
   - [ ] Windows: SendInput API
   - [ ] macOS: CGEvent API

2. **数据通道** (`src/network/datachannel.rs`)
   - [ ] 输入指令协议定义
   - [ ] JSON/MessagePack 序列化
   - [ ] 坐标归一化处理 (0.0-1.0)

**验收标准**:
- 控制端可以远程控制鼠标
- 坐标映射准确（包括高分屏）

---

### Phase 3: WebRTC 优化 🚀

**目标**: 迁移到 WebRTC，实现低延迟 P2P 通信

**状态**: 待开始

**核心功能**:
1. **WebRTC 集成** (`src/webrtc/mod.rs`)
   - [ ] `webrtc-rs` 库集成
   - [ ] PeerConnection 管理
   - [ ] SDP 协商
   - [ ] ICE 候选收集

2. **NAT 穿透**
   - [ ] STUN 服务器配置
   - [ ] TURN 服务器配置 (CoTURN)
   - [ ] 连接失败重试逻辑

3. **视频优化**
   - [ ] 目标 60fps
   - [ ] 动态码率调整 (VBR)
   - [ ] 关键帧间隔优化

4. **光标优化**
   - [ ] 软光标实现
   - [ ] 光标形状同步
   - [ ] 视频流中隐藏系统光标

**验收标准**:
- P2P 连接成功建立
- 延迟 < 100ms
- 60fps 流畅传输

---

### Phase 4: 安全特性 🔒

**目标**: 添加认证、加密和权限管理

**状态**: 待开始

**核心功能**:
1. **认证机制** (`src/auth/mod.rs`)
   - [ ] 密码认证
   - [ ] JWT Token 支持
   - [ ] 设备配对机制

2. **加密增强**
   - [ ] DTLS/SRTP 验证
   - [ ] 端到端加密确认

3. **权限管理**
   - [ ] macOS 权限检测 (屏幕录制/辅助功能)
   - [ ] Windows 权限提示

4. **安全功能**
   - [ ] 紧急断开热键 (Ctrl+Alt+Shift+Q)
   - [ ] 连接日志记录
   - [ ] 异常行为检测

**验收标准**:
- 所有连接需认证
- 权限缺失时有明确提示
- 紧急断开功能可用

---

### Phase 5: 系统服务打包 📦

**目标**: 打包为系统服务，实现开机自启

**状态**: 待开始

**核心功能**:
1. **Windows 打包**
   - [ ] Windows Service 注册
   - [ ] install.bat 安装脚本
   - [ ] uninstall.bat 卸载脚本
   - [ ] NSIS 安装程序 (可选)

2. **macOS 打包**
   - [ ] LaunchAgent plist 配置
   - [ ] 安装脚本
   - [ ] 代码签名
   - [ ] 公证 (Notarization)

3. **配置管理**
   - [ ] 配置文件路径规范化
   - [ ] 日志文件管理
   - [ ] 配置热重载 (可选)

**验收标准**:
- 安装后开机自启
- 卸载干净无残留
- 日志可追溯

---

## 技术债务追踪

| ID | 描述 | 优先级 | 计划修复版本 |
|----|------|--------|--------------|
| T001 | 无 | - | - |

## 变更日志

### 2026-01-21
- 创建项目路线图文档
- 确定五个开发阶段
