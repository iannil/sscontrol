# sscontrol 配置文件示例
# 复制此文件为 config.toml 并根据需要修改

[server]
# WebSocket 服务器地址
url = "ws://localhost:8080"

# 设备 ID (留空将自动生成)
# device_id = ""

[capture]
# 目标帧率
fps = 30

# 屏幕索引 (0 = 主显示器, 1 = 第二个显示器, ...)
# screen_index = 0

# 捕获宽度 (留空使用原始分辨率)
# width = 1920

# 捕获高度 (留空使用原始分辨率)
# height = 1080

[logging]
# 日志级别: trace, debug, info, warn, error
level = "info"

# 日志文件路径 (留空仅输出到控制台)
# file = "/var/log/sscontrol.log"

[security]
# ===== 安全配置 =====
# 注意: 敏感信息建议通过环境变量设置，而非写入配置文件

# API Key (推荐通过环境变量设置: SSCONTROL_API_KEY)
# api_key = "your-secret-api-key"

# TLS 证书路径 (推荐通过环境变量设置: SSCONTROL_TLS_CERT)
# tls_cert = "/path/to/cert.pem"

# TLS 私钥路径 (推荐通过环境变量设置: SSCONTROL_TLS_KEY)
# tls_key = "/path/to/key.pem"

# 是否强制使用 TLS (生产环境建议设为 true)
require_tls = false

# Token 最大有效期（秒），默认 300 (5 分钟)
token_ttl = 300

[webrtc]
# ===== WebRTC 配置 =====

# STUN 服务器列表 (用于 NAT 穿透)
stun_servers = [
    "stun:stun.l.google.com:19302",
    "stun:stun1.l.google.com:19302"
]

# ICE 传输策略: "all" (优先直连，然后中继) 或 "relay" (仅使用 TURN 中继)
ice_transport_policy = "all"

# TURN 服务器配置 (可选，用于 NAT 穿透失败时的中继)
# 注意: TURN 凭证建议通过环境变量设置
# [[webrtc.turn_servers]]
# url = "turn:your-turn-server.com:3478"
# username = "your-username"
# password = "your-password"

# 多个 TURN 服务器示例 (可配置多个作为备份)
# [[webrtc.turn_servers]]
# url = "turn:backup-turn.example.com:3478"
# username = "backup-user"
# password = "backup-pass"

[discovery]
# ===== 设备发现配置 (需要 --features discovery) =====

# 是否启用 mDNS 局域网发现
enabled = true

# 连接码有效期（秒），默认 300 (5 分钟)
connection_code_ttl = 300

[signaling]
# ===== 公共信令服务配置 (需要 --features discovery) =====

# 信令服务提供商: "cloudflare" 或 "custom"
provider = "cloudflare"

# Cloudflare Worker URL (默认使用公共服务)
# worker_url = "https://sscontrol-signaling.workers.dev"

# 自定义信令服务器 URL (当 provider = "custom" 时使用)
# custom_url = "https://your-signaling-server.com"
